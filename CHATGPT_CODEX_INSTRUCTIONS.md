# 📋 Instructions for ChatGPT Codex

**Hey ChatGPT Codex!** 👋

Claude Code hat **Week 1 des BLAB-Projekts** fertig implementiert und braucht jetzt dein Debug/Optimize-Expertenwissen.

---

## 🎯 DEINE AUFGABE

Bitte führe ein **vollständiges Performance & Code Quality Review** durch für:

- **UnifiedControlHub** (60 Hz control loop)
- **ARFaceTrackingManager** (ARKit face tracking)
- **FaceToAudioMapper** (facial expressions → audio parameters)

---

## 📂 RELEVANTE FILES

**Lies diese Files zuerst:**

1. **`.github/HANDOFF_TO_CODEX_WEEK1.md`** ← **HAUPTDOKUMENT (START HIER!)**
   - Vollständige Aufgabenbeschreibung
   - Areas of Concern (was zu testen ist)
   - Performance Targets
   - Reporting Format

2. **Implementation Files:**
   - `Sources/Blab/Unified/UnifiedControlHub.swift`
   - `Sources/Blab/Spatial/ARFaceTrackingManager.swift`
   - `Sources/Blab/Unified/FaceToAudioMapper.swift`

3. **Tests:**
   - `Tests/BlabTests/UnifiedControlHubTests.swift`
   - `Tests/BlabTests/FaceToAudioMapperTests.swift`

4. **Architecture:**
   - `BLAB_EXTENDED_VISION.md`
   - `BLAB_90_DAY_ROADMAP.md`

---

## ✅ DEIN REVIEW SOLL ENTHALTEN:

### 1. **Performance Metrics:**
- Control loop frequency (Ziel: 60 Hz ±5)
- CPU usage (Ziel: < 20%)
- Memory usage (Ziel: < 100 MB)

### 2. **Memory Leak Analysis:**
- Instruments Leaks Report
- Memory growth over time
- Retain cycles (especially Combine pipelines)

### 3. **Thread Safety:**
- Thread Sanitizer warnings
- @MainActor usage korrekt?
- Data races?

### 4. **Code Quality:**
- Refactoring suggestions
- Code smells
- Best practices violations

### 5. **Optimization Recommendations:**
- Bottlenecks identified
- Performance improvements
- Estimated gains

---

## 🛠️ TOOLS DIE DU NUTZEN SOLLTEST:

**Xcode Instruments:**
- Time Profiler (CPU)
- Allocations (Memory)
- Leaks (Memory Leaks)
- System Trace (Threads)

**Xcode Diagnostics:**
- Thread Sanitizer
- Address Sanitizer
- Undefined Behavior Sanitizer

---

## 📊 REPORTING FORMAT

**Nutze das Format aus `.github/HANDOFF_TO_CODEX_WEEK1.md`:**

```markdown
# ChatGPT Codex Review — Week 1 Implementation

## Performance Metrics
- Control Loop Frequency: X Hz (✅/❌)
- CPU Usage: X% (✅/❌)
- Memory Usage: X MB (✅/❌)

## Memory Leak Analysis
[...]

## Thread Safety
[...]

## Code Quality
[...]

## Optimization Recommendations
[...]

## Overall Assessment
**Status:** ✅ Ready / ⚠️ Needs fixes / ❌ Blocking

**Recommendation:** [Proceed to Week 2 / Fix issues first]
```

---

## 🚀 NACH DEINEM REVIEW:

- ✅ **Green:** Claude Code startet Week 2 (Hand Tracking)
- ⚠️ **Yellow:** Claude Code fixt Issues → Week 2
- ❌ **Red:** Major Refactoring needed

---

## ⚠️ WICHTIGE INFO:

**Build Environment:**
- Projekt kann NUR auf **macOS mit Xcode 15+** gebaut werden
- Linux Container hat kein Swift → nutze lokale macOS-Umgebung
- Test auf **iPhone 13 Pro** (oder neuer) für Performance-Baseline
- ARKit braucht **iPhone X+** (TrueDepth camera)

---

## 📞 FRAGEN?

Falls etwas unklar ist:
- Frag den User, er leitet es an Claude Code weiter
- Referenziere File:Line Numbers
- Include Code-Snippets

---

**LOS GEHT'S!** 🔍

Viel Erfolg beim Review! 🚀

---

**Generated by:** Claude Code
**For:** ChatGPT Codex
**Project:** BLAB
**Date:** 2025-10-21
